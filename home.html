<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Story | Anagha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Quicksand:wght@500&display=swap" rel="stylesheet">
    <style>
        body { background: #fffcf2; font-family: 'Quicksand', sans-serif; color: #5e548e; overflow-x: hidden; scroll-behavior: smooth; }
        .memory-font { font-family: 'Gaegu', cursive; }
        .scroll-line { width: 2px; height: 80px; background: #ffafcc; margin: 20px auto; opacity: 0.4; }
        #cursor { width: 15px; height: 15px; background: #ffafcc; border-radius: 50%; position: fixed; pointer-events: none; z-index: 10000; mix-blend-mode: multiply; }
    </style>
</head>
<body>
    <div id="cursor"></div>

    <audio id="bgMusic" loop>
        <source src="birthday-song.mp3" type="audio/mpeg">
    </audio>

    <main class="max-w-2xl mx-auto px-6 py-24 text-center">
        <div class="memory-section opacity-0 translate-y-10 mb-32">
            <h2 class="memory-font text-5xl text-pink-500 mb-8">Remember this?</h2>
            <p class="text-xl leading-relaxed">
                I still remember when we first talked at <span class="text-pink-400 font-bold">Akshaya Tuition Centre</span> back in 9th class. 
                Everything was so different then, but that's where it all began.
            </p>
            <div class="scroll-line mt-12"></div>
        </div>

        <div class="memory-section opacity-0 translate-y-10 mb-32">
            <h2 class="memory-font text-4xl text-pink-500 mb-6">Times Have Changed...</h2>
            <p class="text-xl leading-relaxed italic">
                I really miss how we used to talk a lot about everything. 
                Honestly, I truly miss those long conversations.
            </p>
            <div class="scroll-line mt-12"></div>
        </div>

        <div class="memory-section opacity-0 translate-y-10 mb-32">
            <h2 class="memory-font text-4xl text-pink-500 mb-6">A Friend's Wish</h2>
            <p class="text-xl leading-relaxed">
                I hope this year brings back all that happiness for you. 
                You've always been special, and I hope you have a beautiful year ahead.
            </p>
            <div class="scroll-line mt-12"></div>
        </div>

        <div class="memory-section opacity-0 translate-y-10 mb-20">
            <p class="text-2xl memory-font italic text-pink-400">
                Happy Birthday, Anagha. <br>
                Stay as wonderful as you are.
            </p>
            <div class="mt-16 flex flex-col items-center gap-4">
                <a href="gallery.html" class="px-12 py-4 bg-pink-400 text-white rounded-full font-bold shadow-lg hover:bg-pink-500 transition-all no-underline scale-100 hover:scale-105 active:scale-95">
                    Open the Photo Gallery ðŸ“¸
                </a>
                <p class="text-[10px] opacity-40 uppercase tracking-tighter">Something small, from Farzan</p>
            </div>
        </div>
    </main>

    <script>
    gsap.registerPlugin(ScrollTrigger);
    const music = document.getElementById('bgMusic');

    // 1. Resume music from localStorage
    window.addEventListener('load', () => {
        const savedTime = localStorage.getItem('musicTime');
        if (savedTime) music.currentTime = parseFloat(savedTime);
        music.play().catch(() => {
            window.addEventListener('scroll', () => music.play(), { once: true });
        });
    });

    // 2. Save progress constantly
    setInterval(() => {
        if (!music.paused) localStorage.setItem('musicTime', music.currentTime);
    }, 100);

    // 3. Custom Cursor
    window.addEventListener("mousemove", (e) => gsap.to("#cursor", { x: e.clientX, y: e.clientY, duration: 0.1 }));

    // 4. Section Reveal Animations
    gsap.utils.toArray(".memory-section").forEach(section => {
        gsap.to(section, {
            scrollTrigger: { trigger: section, start: "top 80%" },
            opacity: 1, y: 0, duration: 1.2, ease: "power2.out"
        });
    });

    // --- NEW: SMOOTH EXIT SCRIPT ---
    document.querySelector('a[href="gallery.html"]').addEventListener('click', function(e) {
        e.preventDefault(); // Stop the immediate jump
        const destination = this.href;

        // Fade out music volume
        gsap.to(music, { volume: 0, duration: 1.5 });

        // Fade out page content
        gsap.to("body", { 
            opacity: 0, 
            duration: 1.5, 
            ease: "power2.inOut",
            onComplete: () => {
                window.location.href = destination;
            }
        });
    });
</script>

</body>
</html>

